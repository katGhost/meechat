{% extends "base.html" %}
{% block title %}Rooms{% endblock %}

{% block content %}
<div class="d-flex h-100">

    <!-- Rooms Aside (CHAT-SPECIFIC) -->
    <aside class="aside bg-light border-end p-3" id="rooms-aside-nav" style="white-space: nowrap">
        <h6 class="text-muted mb-3">Rooms</h6>

        <div class="list-group">
            <!-- room list renders here -->
            {% for room in rooms %}
            <a href="#" class="list-group-item list-group-item-action">
                <i class="fa-solid fa-hashtag"></i> {{room}}
            </a>
            {% endfor %}
        </div>
    </aside>

    <!-- Chat Area -->
    <section class="flex-grow-1 d-flex flex-column" id="room-chat-section">

        <!-- Messages -->
        <div class="flex-grow-1 p-4 overflow-auto">
            <!-- messages render here -->
        </div>

        <!-- Input -->
        <div class="border-top p-3 d-flex gap-2">
            <input
                type="text"
                class="form-control"
                placeholder="Type a message..."
            >
            <button class="btn btn-primary px-4">send</button>
        </div>

    </section>
</div>
{% endblock %}
<!-- End contetn block -->
{% block extrajs %}
<script>
    $(document).ready(function () {
        const socket = io();
        let currentRoom = "Introductions";
        let username = document.getElementById('username').textContent;
        let roomMessages = {};

        // socket event listeners

        // handle messages function
        function addMessages(sender, message, type) {
            if (!roomMessages[currentRoom]) {
                roomMessages[currentRoom] = [];
            }

            roomMessages[currentRoom].push({sender, message, type});

            const chat = document.getElementById('chat');
        }

        socket.on("connect", () => {
            console.log("Connected to server");
        });

        socket.on("active_users", (data) => {
            console.log("Active users:", data.users);
        });

        socket.on("status", (data) => {
            console.log(data.msg);
        });
    })
</script>
{% endblock %}